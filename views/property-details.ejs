<!DOCTYPE html>
<html lang="en">
    <head>
    <%- include('_layouts/head') -%>
    <%- include('_layouts/scripts') -%>
    <script src='/assets/js/Utilities.js'></script>
    <script language="javascript" type="text/javascript">
    
        
         function updateBookingInfo()
        {
            var element = document.getElementById("spanGuestsAndRooms");
            var adultsCount = $('#txtGuestsCount').val();
            var roomsCount = $('#txtRoomsCount').val();
            var msg = adultsCount+" Guests - "+roomsCount+" Rooms";
           element.innerHTML = msg;
            $('#txtRoomsAndGuests').val(msg);

            //check for Rooms availability
            validatePropertyAvailability($('#txtCheckInCheckout').val(),roomsCount);
            window.location = "#";
            //document.getElementById('#').scrollIntoView();
            //$('#basicDropdownClick').hide();
            //$('#basicDropdownClick').show();
        }

        var validatePropertyAvailability = function(selectedDates , selectedRooms)
        {
            var btnbooknow = document.getElementById("btnBookNow");
            var btnsoldout = document.getElementById("btnSoldOut");
            var msg = document.getElementById("txtMessage");
            var msg2 = document.getElementById("txtMessage2");
            var isValidDatesSelected = true;
            var isValidRoomsSelected = true;
            <%
            if (!IsPropertyAvailable) {%>
            //Check Dates are valid or not.
           
            var checkInChekoutDate = selectedDates.split('-');
            if(checkInChekoutDate != null && checkInChekoutDate.length > 1)
            {
                var prevCheckInChekOutDates ="<%=UserPreference.CheckInDate%> - <%=UserPreference.CheckOutDate%>";
                if(prevCheckInChekOutDates === selectedDates)
                {
                    //Invalid as same dates selected!
                    isValidDatesSelected = false;
                }
            }
            else
            {
                //Invalid as no proper checkin checkout dates selected!
                isValidDatesSelected = false;
            }

            <%}%>

           
            //Check Dates are valid or not.
            
            selectedRoomsCount = parseInt(selectedRooms);
            var availableRooms = parseInt(<%= PropertyDetails.rooms%>);
            if(availableRooms < selectedRoomsCount)
            {
                isValidRoomsSelected = false;
            }
          

            if (!isValidDatesSelected || !isValidRoomsSelected) {
                btnbooknow.style.display = "none";
                btnsoldout.style.display = "block";

                if(isValidDatesSelected && !isValidRoomsSelected)
                {
                    //change button text
                    $('#soldoutLink').text("Insufficient Rooms!");
                }
                else
                {
                    $('#soldoutLink').text("Sold Out!");
                }
            }
            else {
                btnbooknow.style.display = "block";
                btnsoldout.style.display = "none";
            }

            if (!isValidDatesSelected)
                msg.style.display = "block";
            else
                msg.style.display = "none";
            if (!isValidRoomsSelected)
                msg2.style.display = "block";
            else
                msg2.style.display = "none";
         

        }
       
		$(document).ready(function () {
            console.log('dispdate : <%=UserPreference.DisplayDate%>');
            console.log('CheckInDate : <%=UserPreference.CheckInDate%>');
            console.log('CheckOutDate : <%=UserPreference.CheckOutDate%>');
            var btnbooknow = document.getElementById("btnBookNow");
            var btnsoldout = document.getElementById("btnSoldOut");
            var msg = document.getElementById("txtMessage");
            var msg2 = document.getElementById("txtMessage2");

            <%if(!IsPropertyAvailable)
            {%>
              
            // btnbooknow.style.display = "none";
            // btnsoldout.style.display = "block";
            msg.style.display = "block";
                <%}
                else{
                    %>
                    // btnbooknow.style.display = "block";
                    //     btnsoldout.style.display = "none";
            msg.style.display = "none";
                    <%}%>

                    <%if (!IsRoomsAvailable) {%>
                        console.log("IsRoomsAvailable : "+false);
                        // btnbooknow.style.display = "none";
                        // btnsoldout.style.display = "block";
                        msg2.style.display = "block";

                        <%}
                        else {
                            %>
                            //btnbooknow.style.display = "block";
                        //btnsoldout.style.display = "none";
                        msg2.style.display = "none";
                    <%}
                    
                    if(!IsRoomsAvailable || !IsPropertyAvailable)
                    {%>
                          btnbooknow.style.display = "none";
                          btnsoldout.style.display = "block";

                          <%if (IsPropertyAvailable && !IsRoomsAvailable) {%>
                            //change button text
                            $('#soldoutLink').text("Insufficient Rooms!");
                        <%}
                        else {%>
                            $('#soldoutLink').text("Sold Out!");
                        <%}%>
                    <%}
                    else
                    {%>
                        btnbooknow.style.display = "block";
                        btnsoldout.style.display = "none";
                    <%}%>
       
            //const myInput1 = document.getElementById("checkin_checkout_dates");
           // myInput1._flatpickr.config.onClose=display;
            window.setTimeout(function () {
        // your stuff here
        //var picker = flatpickr('#checkin_checkout_dates');

        const myInput = document.getElementById("checkin_checkout_dates");
        //myInput.className = 'active';
        myInput._flatpickr.config.minDate='today';
        //myInput._flatpickr.config.disable = ["27 Apr 2020"];
        
        var items = [];
        <%
        for(let daterange of DisabledDates)
        {%>
            items.push(
                {
                    from : '<%=daterange.from%>',
                    to :  '<%=daterange.to%>'
                });
        <%}
        %>
        //myInput._flatpickr.set('defaultDate','<%=UserPreference.CheckInDate%>,<%=UserPreference.CheckInDate%>');
        myInput._flatpickr.set('disable', items); 
        
        //myInput._flatpickr.config.set('onClose', dispData()); 
        //console.log('len : '+myInput._flatpickr.config.onClose.length);
        myInput._flatpickr.config.onClose.push(function(selectedDates, selectedDate, instance){
            console.log(selectedDates+" and "+selectedDate+" and "+ instance);
            //var arrDates = selectedDate.split('-');
            $('#txtCheckInCheckout').val(selectedDate)
            validatePropertyAvailability(selectedDate,$('#txtRoomsCount').val());
        }); 
        myInput._flatpickr.set('maxDate',getMaxBookingDate());
        console.log('[\"<%=UserPreference.CheckInDate%>\" , \"<%=UserPreference.CheckOutDate%>\"]');
        
        //myInput._flatpickr("refresh");
        //
//         myInput._flatpickr = {
//  minDate:'today'
//         onClose:function(selectedDates, dateStr, instance)
//           {
//             console.log(selectedDates+'\n'+ dateStr+'\n'+ instance);
//           }
//        }
        myInput._flatpickr.config.dateFormat = 'd M yy';
     //   myInput._flatpickr.set("onValueUpdate",dispData); 
        //var mxdate = getMaxDate();
        //var mydate = mxdate.getDate()+'-May-'+mxdate.getFullYear();
       // myInput._flatpickr.config.maxDate= mydate ;
//console.log('input :'+myInput._flatpickr.config);
       // myInput.config['minDate']='today';
      // $("#checkin_checkout_dates").load(location.href + " #checkin_checkout_dates");
    }, 0);
            //if (window.performance && window.performance.navigation.type === window.performance.navigation.TYPE_BACK_FORWARD) {
    $('#txtGuestsCount').val('<%= UserPreference.Guests%>');      

        //      const myInput = document.getElementById("checkin_checkout_dates");
        // myInput._flatpickr.config.minDate='today';
        // myInput._flatpickr.config._disable = ["27 Apr 2020"];     
        });

	// 		$('#btnBookNow').click(function () {
    //             var dates= $('#checkin_checkout_dates').val().split(" - ");
              
    
    // var checkinDate = new Date(Date.parse(dates[0].replace("[","")));
    // var checkoutDate = new Date(Date.parse(dates[1].replace("]","")));
    
    // var GuestsAndRooms = $('#txtRoomsAndGuests').text();
    // GuestsAndRooms = GuestsAndRooms.replace("Guests","");
    // GuestsAndRooms = GuestsAndRooms.replace("Rooms","");
    // GuestsAndRooms = GuestsAndRooms.trim();
    // GuestsAndRooms = GuestsAndRooms.split(" - ");
    // var guests = GuestsAndRooms[1].trim();
    // var rooms = GuestsAndRooms[0].trim();
	// 			var bookingInfo = {
    //                 property_id: '<%=PropertyDetails._id%>',
    //     customer_id:  "501",//Later change to some session userid
    //     checkinDate: checkinDate,
    //     checkoutDate: checkoutDate,
    //     guests: guests,
    //     rooms: rooms
    // };
	// 				$.ajax({
	// 					url: '/BookingConfirmation',
	// 					type: 'POST',
	// 					datatype: 'json',
	// 					data: bookingInfo,
	// 					success: function (result) {
    //                         console.log("                            """);
	// 						// if (result.status == 1) {
	// 						// 	$('#txtMessage').text('You booked a property successfully!');
	// 						// 	$('#txtMessage').css('color','green');
	// 						// }
	// 						// else {
	// 						// 	$('#txtMessage').text('Your booking failed!');
	// 						// 	$('#txtMessage').css('color','red');
	// 						// }
	// 					}
	// 				});
				
	// 		});
  //      });
    </script>
</head>
    <body>
    <%- include('_layouts/header') -%>

        <!-- ========== MAIN CONTENT ========== -->
        <main id="content">
            <!-- Breadcrumb -->
            <div class="border-bottom mb-7">
                <div class="container">
                    <nav class="py-3" aria-label="breadcrumb">
                        <br>
                    </nav>
                </div>
            </div>
            <!-- End Breadcrumb -->

            <div class="container">
                <div class="row">
                    <div class="col-lg-8 col-xl-9">
                        <div class="d-block d-md-flex flex-center-between align-items-start mb-3">
                            <div class="mb-3">
                                <div class="d-block d-md-flex flex-horizontal-center mb-2 mb-md-0">
                                    <h4 class="font-size-23 font-weight-bold mb-1 mr-3"><%= PropertyDetails.rentalname%></h4>
                                </div>
                                <div class="d-block d-md-flex flex-horizontal-center font-size-14 text-gray-1">
                                    <i class="icon flaticon-placeholder mr-2 font-size-20"></i> <%= PropertyDetails.city%>,
                                    <%= PropertyDetails.state%>,<%= PropertyDetails.country%>
                                    <a href="#" class="ml-1 d-block d-md-inline"></a>
                                </div>
                            </div>
                            <a href="javascript:history.go(-1);">
                                Backto Search List 
                              </a>
                        </div>
                        <div class="py-4 border-top mb-4">
                            <ul class="mb-4 list-group list-group-borderless list-group-horizontal flex-center-between text-center flex-wrap">
                                <li class="list-group-item text-lh-sm ">
                                    <i class="flaticon-plans text-primary font-size-50 mb-1 d-block"></i>
                                    <div class="text-gray-1"><%= PropertyDetails.area%>  sq ft</div>
                                </li>
                                <li class="list-group-item text-lh-sm ">
                                    <i class="flaticon-door text-primary font-size-50 mb-1 d-block"></i>
                                    <div class="text-gray-1"><%= PropertyDetails.rooms%> rooms</div>
                                </li>
                                <li class="list-group-item text-lh-sm ">
                                    <i class="flaticon-bathtub text-primary font-size-50 mb-1 d-block"></i>
                                    <div class="text-gray-1"><%= PropertyDetails.baths%> bathrooms</div>
                                </li>
                                <li class="list-group-item text-lh-sm ">
                                    <i class="flaticon-bed-1 text-primary font-size-50 mb-1 d-block"></i>
                                    <div class="text-gray-1"><%= PropertyDetails.beds%> beds</div>
                                </li>
                            </ul>

                            <div class="position-relative">
                                <!-- Images Carousel -->
                                <div id="sliderSyncingNav" class="js-slick-carousel u-slick mb-2"
                                    data-infinite="true"
                                    data-arrows-classes="d-none d-lg-inline-block u-slick__arrow-classic u-slick__arrow-centered--y rounded-circle"
                                    data-arrow-left-classes="flaticon-back u-slick__arrow-classic-inner u-slick__arrow-classic-inner--left ml-lg-2 ml-xl-4"
                                    data-arrow-right-classes="flaticon-next u-slick__arrow-classic-inner u-slick__arrow-classic-inner--right mr-lg-2 mr-xl-4"
                                    data-nav-for="#sliderSyncingThumb">
                                    <%
                                    for(var i=0;i<PropertyDetails.images.length;i++)
                                    {
                                    %>
                                    <div class="js-slide">
                                        <img class="img-fluid border-radius-3"  src="/images/<%= PropertyDetails._id%>/<%= PropertyDetails.images[i]%>" alt="Image Description">
                                    </div>
                                    <%
                                    }
                                    %>
                                </div>

                                <div id="sliderSyncingThumb" class="js-slick-carousel u-slick u-slick--gutters-4 u-slick--transform-off"
                                    data-infinite="true"
                                    data-slides-show="6"
                                    data-is-thumbs="true"
                                    data-nav-for="#sliderSyncingNav"
                                    data-responsive='[{
                                        "breakpoint": 992,
                                        "settings": {
                                            "slidesToShow": 4
                                        }
                                    }, {
                                        "breakpoint": 768,
                                        "settings": {
                                            "slidesToShow": 3
                                        }
                                    }, {
                                        "breakpoint": 554,
                                        "settings": {
                                            "slidesToShow": 2
                                        }
                                    }]'>
                                    <%
                                    for(var i=0;i<PropertyDetails.images.length;i++)
                                    {
                                    %>
                                    <div class="js-slide" style="cursor: pointer;">
                                        <img class="img-fluid border-radius-3 height-110" src="/images/<%= PropertyDetails._id%>/<%= PropertyDetails.images[i]%>" alt="Image Description">
                                    </div>
                                    <%
                                    }
                                    %>
                                </div>
                                <!-- End Images Carousel -->
                            </div>
                        </div>
                        <div id="stickyBlockStartPoint" class="mb-4">
                            <div class="border rounded-pill js-sticky-block p-1 border-width-2 z-index-4 bg-white"
                                data-parent="#stickyBlockStartPoint"
                                data-offset-target="#logoAndNav"
                                data-sticky-view="lg"
                                data-start-point="#stickyBlockStartPoint"
                                data-end-point="#stickyBlockEndPoint"
                                data-offset-top="30"
                                data-offset-bottom="30">
                                <ul class="js-scroll-nav nav tab-nav-pill flex-nowrap tab-nav">
                                    <li class="nav-item">
                                        <a class="nav-link font-weight-medium" href="#scroll-description">
                                            <div class="d-flex flex-column flex-md-row  position-relative text-dark align-items-center">
                                                <span class="tabtext font-weight-semi-bold">Description</span>
                                            </div>
                                        </a>
                                    </li>
                                    <li class="nav-item">
                                        <a class="nav-link font-weight-medium" href="#scroll-amenities">
                                            <div class="d-flex flex-column flex-md-row  position-relative text-dark align-items-center">
                                                <span class="tabtext font-weight-semi-bold">Amenities</span>
                                            </div>
                                        </a>
                                    </li>
                                    <li class="nav-item">
                                        <a class="nav-link font-weight-medium" href="#scroll-specifications">
                                            <div class="d-flex flex-column flex-md-row  position-relative text-dark align-items-center">
                                                <span class="tabtext font-weight-semi-bold">Details</span>
                                            </div>
                                        </a>
                                    </li>
                                    <li class="nav-item">
                                        <a class="nav-link font-weight-medium" href="#scroll-location">
                                            <div class="d-flex flex-column flex-md-row  position-relative text-dark align-items-center">
                                                <span class="tabtext font-weight-semi-bold">Map</span>
                                            </div>
                                        </a>
                                    </li>
                                </ul>
                            </div>
                        </div>
                        <div class="border-bottom position-relative">
                            <h5 id="scroll-description" class="font-size-21 font-weight-bold text-dark">
                                Description
                            </h5>
                            <p><%= PropertyDetails.description%>

                            <div class="collapse" id="collapseLinkExample">
                                <p><%= PropertyDetails.description%></p>
                            </div>

                            <a class="link-collapse link-collapse-custom gradient-overlay-half mb-5 d-inline-block border-bottom border-primary" data-toggle="collapse" href="#collapseLinkExample" role="button" aria-expanded="false" aria-controls="collapseLinkExample">
                                <span class="link-collapse__default font-size-14">View More <i class="flaticon-down-chevron font-size-10 ml-1"></i></span>
                                <span class="link-collapse__active font-size-14">View Less <i class="flaticon-arrow font-size-10 ml-1"></i></span>
                            </a>
                        </div>
                        <div class="border-bottom py-4">
                            <h5 id="scroll-amenities" class="font-size-21 font-weight-bold text-dark mb-4">
                                Amenities
                            </h5>
                            <ul class="list-group list-group-borderless list-group-horizontal list-group-flush no-gutters row">
                               <%
                                   if (PropertyDetails.amenities.indexOf('wifi') !== -1)
                               {%>
                                <li class="col-md-4 mb-3 list-group-item"><i class="flaticon-wifi-signal mr-3 text-primary font-size-24"></i>Wifi</li>
                                <%} %>
                                <%
                                   if (PropertyDetails.amenities.indexOf('Wake-up call') !== -1)
                               {%>
                               
                                <li class="col-md-4 mb-3 list-group-item"><i class="flaticon-alarm mr-3 text-primary font-size-24"></i>Wake-up call</li>
                                <%} %>
                                <%
                                   if (PropertyDetails.amenities.indexOf('Bathrobes') !== -1)
                               {%>
                                <li class="col-md-4 mb-3 list-group-item"><i class="flaticon-bathrobe mr-3 text-primary font-size-24"></i>Bathrobes</li>
                                <%} %>
                                <%
                                   if (PropertyDetails.amenities.indexOf('Fitness center') !== -1)
                               {%>
                                <li class="col-md-4 mb-3 list-group-item"><i class="flaticon-weightlifting mr-3 text-primary font-size-24"></i>Fitness center</li>
                                <%} %>
                                <%
                                   if (PropertyDetails.amenities.indexOf('Telephone') !== -1)
                               {%>
                                <li class="col-md-4 mb-3 list-group-item"><i class="flaticon-phone-call mr-3 text-primary font-size-24"></i>Telephone</li>
                                <%} %>
                                <%
                                   if (PropertyDetails.amenities.indexOf('Dry cleaning') !== -1)
                               {%>
                                <li class="col-md-4 mb-3 list-group-item"><i class="flaticon-folded-towel mr-3 text-primary font-size-24"></i>Dry cleaning</li>
                                <%} %>
                                <%
                                   if (PropertyDetails.amenities.indexOf('Mini bar') !== -1)
                               {%>
                                <li class="col-md-4 mb-3 list-group-item"><i class="flaticon-wine-glass mr-3 text-primary font-size-24"></i>Mini bar</li>
                                <%} %>
                                <%
                                   if (PropertyDetails.amenities.indexOf('Hair dryer') !== -1)
                               {%>
                                <li class="col-md-4 mb-3 list-group-item"><i class="flaticon-hair-dryer mr-3 text-primary font-size-24"></i>Hair dryer</li>
                                <%} %>
                                <%
                                   if (PropertyDetails.amenities.indexOf('High chair') !== -1)
                               {%>
                                <li class="col-md-4 mb-3 list-group-item"><i class="flaticon-desk-chair mr-3 text-primary font-size-24"></i>High chair</li>
                                <%} %>
                                <%
                                   if (PropertyDetails.amenities.indexOf('Restaurant') !== -1)
                               {%>
                                <li class="col-md-4 mb-3 list-group-item"><i class="flaticon-hamburger mr-3 text-primary font-size-24"></i>Restaurant</li>
                                <%} %>
                                <%
                                   if (PropertyDetails.amenities.indexOf('Air Conditioning') !== -1)
                               {%>
                                <li class="col-md-4 mb-3 list-group-item"><i class="flaticon-air-conditioner mr-3 text-primary font-size-24"></i>Air Conditioning</li>
                                <%} %>
                                <%
                                   if (PropertyDetails.amenities.indexOf('Slippers') !== -1)
                               {%>
                                <li class="col-md-4 mb-3 list-group-item"><i class="flaticon-slippers mr-3 text-primary font-size-24"></i>Slippers</li>
                                <%} %>
                            </ul>
                        </div>
                        <div class="border-bottom py-4">
                            <h5 id="scroll-specifications" class="font-size-21 font-weight-bold text-dark mb-4">
                                Details
                            </h5>
                            <ul class="list-group list-group-borderless list-group-horizontal list-group-flush no-gutters row">
                                <li class="col-md-5 mb-5 mb-md-0 list-group-item pt-0 border-bottom pb-3">
                                    <%
                                   if (PropertyDetails.rules.indexOf('Children Allowed') !== -1)
                               {%>
                                    <div class="flex-horizontal-center mb-3 text-gray-1"><i class="flaticon-tick mr-3 font-size-16 text-primary"></i>Children Allowed</div>
                                    <%}
                                   if (PropertyDetails.rules.indexOf('Smoking Allowed') !== -1)
                               {%>
                                    <div class="flex-horizontal-center mb-3 text-gray-1"><i class="flaticon-tick mr-3 font-size-16 text-primary"></i>Smoking Allowed</div>
                                    <%}
                                   if (PropertyDetails.rules.indexOf('Pets Allowed') !== -1)
                               {%>
                                    <div class="flex-horizontal-center mb-3 text-gray-1"><i class="flaticon-tick mr-3 font-size-16 text-primary"></i>Pets Allowed</div>
                                    <%}
                                   if (PropertyDetails.rules.indexOf('Party Allowed') !== -1)
                               {%>
                                    <div class="flex-horizontal-center mb-3 text-gray-1"><i class="flaticon-tick mr-3 font-size-16 text-primary"></i>Party Allowed</div>
                                    <%} %>
                                </li>
                                <li class="col-md-5 mb-5 mb-md-0 list-group-item pt-0 border-bottom pb-3">
                                    <%
                                    if (PropertyDetails.rules.indexOf('Children Allowed') == -1)
                                {%>
                                    <div class="flex-horizontal-center mb-3 text-gray-1"><i class="flaticon-close mr-3 font-size-12 text-primary"></i>Children Allowed</div>
                                    <%} 
                                                                   
                                    if (PropertyDetails.rules.indexOf('Smoking Allowed') === -1)
                                {%>
                                    <div class="flex-horizontal-center mb-3 text-gray-1"><i class="flaticon-close mr-3 font-size-12 text-primary"></i>Smoking Allowed</div>
                                    <%} 
                                   
                                   if (PropertyDetails.rules.indexOf('Pets Allowed') === -1)
                               {%>
                                    <div class="flex-horizontal-center mb-3 text-gray-1"><i class="flaticon-close mr-3 font-size-12 text-primary"></i>Pets Allowed</div>
                                    <%}
                                   if (PropertyDetails.rules.indexOf('Party Allowed') === -1)
                               {%>
                                    <div class="flex-horizontal-center mb-3 text-gray-1"><i class="flaticon-close mr-3 font-size-12 text-primary"></i>Party Allowed</div>
                                    <%} %>
                                    
                                </li>
                            </ul>
                        </div>
                        
                    </div>
                    
                    <div class="col-lg-4 col-xl-3">
                        <form action="/BookingConfirmation" name="frmBookingConfirmation" id = "frmBookingConfirmation" method="POST" >
                            <input type="hidden" value="<%=PropertyDetails._id%>" name="property_id" id="property_id" />
                        <div class="mb-4">
                            <div class="border border-color-7 rounded mb-5">
                                <div class="border-bottom">
                                 
                                        <span style='font-family:"Rubik", Helvetica, Arial, sans-serif;'  class="font-size-24 text-gray-6 font-weight-bold ml-4"><%=PropertyDetails.rentalname%></span>
                                    
                                </div>
                                <div class="p-4">
                                    <!-- Input -->
                                    <span class="d-block text-gray-1  font-weight-normal mb-0 text-left">Price / Night</span>
                                    <div class="mb-4">
                                        <div class="input-group border-bottom border-width-2 border-color-1" disabled="disabled">
                                            <i class="flaticon-price-1 d-flex align-items-center mr-2 text-primary font-weight-semi-bold font-size-22"></i>
                                          <input readonly="readonly" style="background-color: transparent;"  type="text" value="$<%=PropertyDetails.price%>" class="form-control font-size-16 shadow-none hero-form font-weight-bold border-0 p-0" placeholder="Where are you going?" aria-label="Where are you going?" aria-describedby="keywordInputAddon">
                                        </div>
                                    </div>
                                    <!-- End Input -->

                                    <!-- Input -->
                                    <span class="d-block text-gray-1 font-weight-normal mb-0 text-left">Check In - Out</span>
                                    <div class="mb-4" id="datepickrControl">
                                        <div class="border-bottom border-width-2 border-color-1">
                                            <div id="datepickerWrapperPick" class="u-datepicker input-group">
                                                <div class="input-group-prepend">
                                                    <span class="d-flex align-items-center mr-2 font-size-21">
                                                      <i class="flaticon-calendar text-primary font-weight-semi-bold"></i>
                                                    </span>
                                                </div>
                                                <input class="js-range-datepicker w-auto font-size-16 ml-1 shadow-none font-weight-bold form-control hero-form bg-transparent border-0 flatpickr-input p-0"  type="text"  aria-label="July 7/2019"
                                                data-rp-wrapper="#datepickerWrapperPick"
                                                data-rp-type="range"
                                                placeholder="<%=UserPreference.CheckInDate%> - <%=UserPreference.CheckOutDate%>"
                                                data-rp-default-date="[<%= UserPreference.DisplayDate%>]"
                                                name = "checkin_checkout_dates"
                                                id="checkin_checkout_dates" 
                                                >
                                               
                                            </div>
                                            <input type="hidden" id="txtCheckInCheckout" value="<%=UserPreference.CheckInDate%> - <%=UserPreference.CheckOutDate%>"/>
                                            <!-- End Datepicker '["Jul 7 / 2020", "Aug 25 / 2020"]'-->
                                        </div>
                                    </div>
                                    <!-- End Input -->

                                    <!-- Input -->
                                    <span class="d-block text-gray-1 font-weight-normal mb-0 text-left">Guests</span>
                                    <div class="mb-4 position-relative">
                                        <div class="border-bottom border-width-2 border-color-1">
                                            <a id="basicDropdownClickInvoker" class="dropdown-nav-link dropdown-toggle flex-horizontal-center pt-3 pb-2" href="javascript:;" role="button"
                                                aria-controls="basicDropdownClick"
                                                aria-haspopup="true"
                                                aria-expanded="false"
                                                data-unfold-event="click"
                                                data-unfold-target="#basicDropdownClick"
                                                data-unfold-type="css-animation"
                                                data-unfold-duration="300"
                                                data-unfold-delay="300"
                                                data-unfold-hide-on-scroll="true"
                                                data-unfold-animation-in="slideInUp"
                                                data-unfold-animation-out="fadeOut">
                                                <i class="flaticon-add-group d-flex align-items-center mr-3 font-size-20 text-primary font-weight-semi-bold"></i>
                                                <span class="text-black font-size-16 font-weight-semi-bold" id="spanGuestsAndRooms" name="spanGuestsAndRooms"><%= UserPreference.Guests%> Guests - <%= UserPreference.Rooms%> Rooms</span>
                                                <input type="hidden" name="txtRoomsAndGuests" id="txtRoomsAndGuests" class="text-black font-size-16 font-weight-semi-bold mr-auto"
                                                value="<%= UserPreference.Guests%> Guests - <%= UserPreference.Rooms%> Rooms"></span>
                                            </a>
                                            <div id="basicDropdownClick" class="dropdown-menu dropdown-unfold col m-0" aria-labelledby="basicDropdownClickInvoker">
                                                <div class="w-100 py-2 px-3 mb-3">
                                                    <div class="js-quantity mx-3 row align-items-center justify-content-between">
                                                        <span class="d-block font-size-16 text-secondary font-weight-medium">Guests</span>
                                                        <div class="d-flex">
                                                            <a class="js-minus btn btn-icon btn-medium btn-outline-secondary rounded-circle" href="javascript:;">
                                                                <small class="fas fa-minus btn-icon__inner"></small>
                                                            </a>
                                                            <input  id="txtGuestsCount" class="js-result form-control h-auto border-0 rounded p-0 max-width-6 text-center" type="text" value="<%= UserPreference.Guests%>">
                                                            <a class="js-plus btn btn-icon btn-medium btn-outline-secondary rounded-circle" href="javascript:;">
                                                                <small class="fas fa-plus btn-icon__inner"></small>
                                                            </a>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="w-100 py-2 px-3 mb-3">
                                                    <div class="js-quantity mx-3 row align-items-center justify-content-between">
                                                        <span class="d-block font-size-16 text-secondary font-weight-medium">Rooms</span>
                                                        <div class="d-flex">
                                                            <a class="js-minus btn btn-icon btn-medium btn-outline-secondary rounded-circle" href="javascript:;">
                                                                <small class="fas fa-minus btn-icon__inner"></small>
                                                            </a>
                                                            <input id="txtRoomsCount" class="js-result form-control h-auto border-0 rounded p-0 max-width-6 text-center" type="text" value="<%= UserPreference.Rooms%>">
                                                            <a class="js-plus btn btn-icon btn-medium btn-outline-secondary rounded-circle" href="javascript:;">
                                                                <small class="fas fa-plus btn-icon__inner"></small>
                                                            </a>
                                                        </div>
                                                    </div>
                                                </div>
                                              
                                                <div class="w-100 text-right py-1 pr-5">
                                                    <a class="text-primary font-weight-semi-bold font-size-16" href="javascript:updateBookingInfo();">Done</a>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <!-- End Input -->

                                 <!-- <div class="text-center"> -->
                                     <div id="btnBookNow">
                                  
                                        <a id="propertyBookingControl" href="javascript:;" 
                                        onclick="document.getElementById('frmBookingConfirmation').submit(); return false;"
                                        class="btn btn-primary d-flex align-items-center justify-content-center height-60 w-100 mb-xl-0 mb-lg-1 transition-3d-hover font-weight-bold"
                                        >
                                        Book Now
                                    </a>
                                </div>
                                <div id="btnSoldOut">
                                        <a id="soldoutLink"
                                        style="background-color: gray;color: whitesmoke;border-color: gray;"
                                        class="btn btn-primary d-flex align-items-center justify-content-center height-60 w-100 mb-xl-0 mb-lg-1  font-weight-bold"
                                        >
                                        Sold Out!
                                    </a>
                                </div>
                                    <!-- </div>  -->
                                    <!-- <div class="col-sm-12 col-lg-1dot8 align-self-lg-end text-md-right" style="margin: 0 auto;">
                                        <input  type="submit" value="Book Now" id= "btnBookNow"  class="btn btn-primary d-flex align-items-center justify-content-center height-60 w-100 mb-xl-0 mb-lg-1 transition-3d-hover font-weight-bold"/>
                                    </div> -->
                                 
                                        <br/>
                                    <span id="txtMessage" style="font-size: 15px; color: #FF4500;font-family: 'Rubik', Helvetica, Arial, sans-serif;">Error : Property is soldout , choose other available dates.</span>
                                </br>
                                    <span id="txtMessage2" style="font-size: 15px; color: #FF4500;font-family: 'Rubik', Helvetica, Arial, sans-serif;">Error : No sufficient rooms, choose less no.of rooms or change the property.</span>
                                   
                                </div>
                            </div>
                        </div>
                    
                    </div>


                </form>
                </div>
            </div>
        </main>
        <!-- ========== END MAIN CONTENT ========== -->

    <%- include('_layouts/footer') -%>

        <!-- Go to Top -->
        <a class="js-go-to u-go-to-modern" href="#" data-position='{"bottom": 15, "right": 15 }' data-type="fixed" data-offset-top="400" data-compensation="#header" data-show-effect="slideInUp" data-hide-effect="slideOutDown">
            <span class="flaticon-arrow u-go-to-modern__inner"></span>
        </a>
        <!-- End Go to Top -->
    <%- include('_layouts/scripts') -%>

    </body>
</html>
